#!/bin/sh

usage() {
	echo "Usage:  tesla <tool> [tool arguments]"
	echo
	echo "  where <tool> is one of:"
	echo "    - analyse       (analyse C assertions, produce TESLA IR)"
	echo "    - graph         (convert TESLA IR into GraphViz .dot format)"
	echo "    - instrument    (add TESLA instrumention to LLVM IR)"
	echo "    - read          (read information from TESLA IR)"
	echo
}

if [ "$1" == "" ]; then
	usage
	exit 1
fi

if [ "$TESLA_BUILD_DIR" != "" ]; then
  export PATH="$TESLA_BUILD_DIR/tesla/analyse:$TESLA_BUILD_DIR/tesla/instrument:$TESLA_BUILD_DIR/tesla/tools/graph:$TESLA_BUILD_DIR/tesla/tools/read:$PATH"
else
  export PATH=$(dirname $0)
fi

tesla-$*

